<html>

<body>
    <!-- <script src="./marked.min.js"></script> -->
    <script src="./marked.min.js"></script>
    <script type="module">
        import { personalInformation } from "./personalInformation.js"
        import { educationExperience } from "./educationExperience.js"
        import { award } from "./award.js"
        import { personalSkill } from "./personalSkill.js"
        import { readAsStringAsync } from "./fileReader.js"
        import { split, removeAnnotation, findPersonalInformation } from "./mdSpliter.js"
        import { findTitle } from "./baseMatcher.js"
        let str = await readAsStringAsync("./README.md")
        str = removeAnnotation(str)

        window.document.body.appendChild(
            personalInformation.render(
                personalInformation.parse(
                    findPersonalInformation(str)[0]
                )
            )
        )

        str = split(str)

        for (let item of str) {
            let title = findTitle(item)
            switch (title) {
                case "教育经历":
                    window.document.body.appendChild(
                        educationExperience.render(
                            educationExperience.parse(
                                item
                            )
                        )
                    )
                    break;
                case "获奖情况":
                    window.document.body.appendChild(
                        award.render(
                            award.parse(
                                item
                            )
                        )
                    )
                    break;
                case "个人技能":
                    window.document.body.appendChild(
                        personalSkill.render(
                            personalSkill.parse(
                                item
                            )
                        )
                    )
            }
        }

    </script>
</body>

</html>