<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
</head>
<body>
    <!-- <script src="./marked.min.js"></script> -->
    <script type="module">
        import { personalInformation } from "./personalInformation.js"
        import { educationExperience } from "./educationExperience.js"
        import { award } from "./award.js"
        import { personalSkill } from "./personalSkill.js"
        import { workExperience } from "./workExperience.js"
        import { projectExperience } from "./projectExperience.js"
        import { readAsStringAsync } from "./fileReader.js"
        import { findTitle, split, removeAnnotation, findPersonalInformation } from "./baseMatcher.js"
        let str = await readAsStringAsync("./MyVitae.md")
        str = removeAnnotation(str)

        window.document.body.appendChild(
            personalInformation.render(
                personalInformation.parse(
                    findPersonalInformation(str)[0]
                )
            )
        )

        str = split(str)
        let titleModelMap = {
            "教育经历": educationExperience,
            "获奖情况": award,
            "个人技能": personalSkill,
            "工作经历": workExperience,
            "项目经历": projectExperience
        }
        for(let item of str){
            let title=findTitle(item)
            if(titleModelMap[title]!=null)
            window.document.body.appendChild(
                titleModelMap[title].render(
                    titleModelMap[title].parse(
                        item
                    )
                )
            )
        }
    </script>
</body>

</html>